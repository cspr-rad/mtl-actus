#+TITLE: Executing Finance in Metric Temporal Logic
#+SUBTITLE: A Formal Verification Schema
#+AUTHOR: Quinn Dougherty
#+EMAIL: quinn@casper.network
#+DATE: $\today$ DRAFT
#+BIBLIOGRAPHY: ./b.bib

#+BEGIN_abstract
A financial contract is an interaction between people involving money. It is bad when there are bugs in the code executing these interactions. Additionally, it's not great when the interactions become too complicated to understand. Previously, the Algorithmic Contract Types Unified Standard (ACTUS) [cite:@Brammertz2019SmartCD] attempted to tackle this twin problem by rendering interactions as atomic state machines that compose together. In this paper, we take a natural next step to metric temporal logic (MTL) and take a contract to be an MTL /specification/, showing the proof of concept on the principal at maturity loan (PAM). Along the way, we implement MTL in the Lean prover. The code is available at the https url https://github.com/cspr-rad/mtl-actus.
#+END_abstract

* Introduction
1. there is a problem
   - Bazillions of dollars are lost to bad financial QA
   - instruments become exotic and uninterpretable
2. ACTUS tries to fix this
   - but it is flawed.
3. we should fix this with ideas from /model checking/
   - MTL specs can be an interpretable grounding to wild instruments
   - Contracts can be checked to abide by MTL specs.
** Problem statement
ACTUS makes tremendous steps forward in the goal of verifiable financial contracts. However, it's current iteration falls short in a few ways. Lorem ipsum
** Contributions
The current paper shows in principle how to model finance as a reactive system for the purposes of formal verification, on an example Principal at Maturity (PAM) contract.
* Prior Work
** Algorithmic Contract Types Unified Standard
In [cite:@Brammertz2019SmartCD], the ACTUS (Algorithmic Contract Types Unified Standards) introduces a formalized approach to representing financial contracts using concepts from state machine theory. Developed by the ACTUS Financial Research Foundation, this framework models financial instruments as algorithmic contracts with well-defined states, events, and transition functions.

A key contribution of ACTUS is its event-based architecture for financial modeling. Each contract type is defined by a set of state variables and a series of event types. These events trigger state transitions and cash flows according to precisely specified functions. This approach allows for a representation of financial contracts over their lifecycle, enabling accurate projection of future states and cash flows.

ACTUS formalizes the temporal aspects of financial contracts through standardized scheduling functions and date adjustment conventions. This allows for precise modeling of complex temporal patterns in financial agreements, such as irregular payment schedules or conditional events.

By applying state machine concepts to finance, ACTUS provides a rigorous mathematical foundation for representing and analyzing financial contracts. This standardization facilitates more precise financial modeling, risk assessment, and regulatory analysis across a wide range of financial instruments.

** Algebraic and Inductively Defined Financial Interaction
[cite:@Jones2000ComposingCA] defined an algebra for contracts of two parties. In [cite:@Bahr2015CertifiedSM] a contract for more than two parties can be well-typed. This line of work is an alternative solution to the ACTUS-like solution, namely the typechecker, to a very similar problem set around correctness and interpretability of finance.

The seminal work on formalizing financial contracts using functional programming techniques was done by [cite:@Jones2000ComposingCA]. They introduced a combinator library for describing contracts declaratively, along with a compositional denotational semantics for valuing contracts. Their approach allowed complex contracts to be built up from simpler components in a modular way. Importantly, they separated the abstract specification of contracts from the concrete implementation details of valuation. This allowed different valuation models and numerical methods to be used without changing the contract descriptions.

Building on this foundation, [cite:@Bahr2015CertifiedSM] developed a certified symbolic management system for multi-party financial contracts. They extended the contract language to handle multiple parties and added a formal cash-flow semantics. Crucially, they implemented the contract language and management functionality in the Coq proof assistant, allowing them to formally verify properties like causality and provide certified contract analyses and transformations. Their approach demonstrates how techniques from programming language theory and formal verification can be applied to increase trust and reliability in financial contract management software. The use of symbolic techniques, rather than purely numeric ones, opens up new possibilities for contract analysis.

** Contract based design
/I don't remember which work I wanted to discuss here, when I jotted down this heading/. /Should try to find contract based design takes on finance before I delete this/.

** B-Method
[?cite:@zacharya's preprint] have a preprint on ACTUS in B-Method /this may not be public enough to cite by now/
* (body) Problem statement (Avi)
* (body) (Code from the codebase)
Unlike ACTUS, we consider the hard part of time to be a presentational step taken later, and content ourselves with something like Unix Time (a newtype of whole numbers). We do something similar with money.
* Future work
** Implementing the remaining ACTUS taxonomy
There is a folk wisdom among ACTUS circles that PAM is 80% of the work. However, it still remains for us to implement the other 30something contracts in the ACTUS taxonomy.
** kind2/lustre take
* Conclusion
* Bibliography
#+PRINT_BIBLIOGRAPHY:
